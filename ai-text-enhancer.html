<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Text Enhancer | GTTOOLS</title>

<style>
body{font-family:Arial,Helvetica,sans-serif;background:#f5f7fb;margin:0;padding:40px;text-align:center}
textarea{width:90%;max-width:700px;height:160px;margin:15px 0;padding:12px;border-radius:8px;border:1px solid #ccc;font-size:15px}
select,button{padding:12px 16px;margin-top:10px;font-size:15px;border-radius:8px;border:none}
button{background:#4f46e5;color:white;font-weight:600;cursor:pointer;margin:8px}
button:hover{opacity:.9}
#output{margin:25px auto 0;padding:18px;max-width:700px;background:#fff;border:1px solid #ddd;border-radius:8px;text-align:left;white-space:pre-wrap;min-height:80px}
.counter{color:#666;font-size:14px;margin-top:-10px}
</style>
</head>

<body>

<h1>AI Text Enhancer</h1>
<p>Improve, humanize, simplify, or polish your writing using AI.</p>

<textarea id="inputText" placeholder="Paste your text here..."></textarea>
<p class="counter" id="inputCount">Words: 0</p>

<select id="mode">
  <option value="professional">Make Professional</option>
  <option value="human">Make More Human</option>
  <option value="simple">Simplify Language</option>
  <option value="grammar">Fix Grammar</option>
</select><br>

<button onclick="enhanceText()">‚ú® Improve Text</button>
<button onclick="copyText()">üìã Copy Result</button>

<div id="output">Your improved text will appear here.</div>

<script>
// Word counter for input
document.getElementById("inputText").addEventListener("input", function(){
  const words = this.value.trim().split(/\s+/).filter(Boolean).length;
  document.getElementById("inputCount").innerText = "Words: " + words;
});

function copyText(){
  const text = document.getElementById("output").innerText;
  navigator.clipboard.writeText(text);
  alert("Copied to clipboard!");
}

async function enhanceText(){
  const text = document.getElementById("inputText").value.trim();
  const mode = document.getElementById("mode").value;
  const output = document.getElementById("output");

  if(!text){
    alert("Please enter text first.");
    return;
  }

  output.innerHTML = "‚è≥ Improving your text<span id='dots'>...</span>";
  let dots = 0;
  const interval = setInterval(()=>{
    dots = (dots+1)%4;
    document.getElementById("dots").innerText = ".".repeat(dots);
  }, 400);

  try {
    const res = await fetch("https://gtt-ai-backend.vercel.app/api/enhance", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text, mode })
    });

    const data = await res.json();
    clearInterval(interval);

    if(data.result){
      const wordCount = data.result.trim().split(/\s+/).length;
      output.innerText = data.result + "\n\nüìù Words: " + wordCount;
    } else {
      output.innerText = "‚ö† " + (data.error || "Unexpected AI response");
    }

  } catch (err) {
    clearInterval(interval);
    output.innerText = "‚ùå Could not connect to AI server.";
  }
}
</script>

</body>
</html>
